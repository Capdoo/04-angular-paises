import{A as d,B as y,C as P,D as F,E as w,F as N,G as Y,H as D,I as g,J as M,K as Z,L as ee,P as te,R as ne,S as ie,T as A,U as O,V as _,X as oe,a as k,b as z,c as U,d as J,e as H,f as S,g as h,h as L,i as G,j as K,k as Q,l as T,m as W,n as B,o as s,p as f,q as u,r as c,s as a,t as r,u as m,v as X,w as E,x as b,y as R,z as l}from"./chunk-FQT7CZOR.js";var v=(()=>{let t=class t{constructor(i){this.httpClient=i,this.apiUrl="https://restcountries.com/v3.1",this.cacheStore={byCapital:{term:"",countries:[]},byCountries:{term:"",countries:[]},byRegion:{region:"",countries:[]}},console.log("Countries Service Init"),this.loadFromLocalStorage()}saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadFromLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}getCountriesRequest(i){return this.httpClient.get(i).pipe(U(o=>k([])),J(500))}searchCountryByAlphaCode(i){let o=`${this.apiUrl}/alpha/${i}`;return this.httpClient.get(o).pipe(z(e=>e.length>0?e[0]:null),U(e=>k(null)))}searchCapital(i){let o=`${this.apiUrl}/capital/${i}`;return this.getCountriesRequest(o).pipe(S(e=>{this.cacheStore.byCapital={term:i,countries:e}}),S(()=>this.saveToLocalStorage()))}searchName(i){let o=`${this.apiUrl}/name/${i}`;return this.getCountriesRequest(o).pipe(S(e=>{this.cacheStore.byCountries={term:i,countries:e}}),S(()=>this.saveToLocalStorage()))}searchRegion(i){let o=`${this.apiUrl}/region/${i}`;return this.getCountriesRequest(o).pipe(S(e=>{this.cacheStore.byRegion={region:i,countries:e}}),S(()=>this.saveToLocalStorage()))}};t.\u0275fac=function(o){return new(o||t)(W(ee))},t.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function ue(n,t){n&1&&(a(0,"div",2),l(1,` No hay paises que mostrar
`),r())}var de=n=>["/countries/by",n];function he(n,t){if(n&1&&(a(0,"tr")(1,"td"),l(2),r(),a(3,"td"),l(4),r(),a(5,"td"),m(6,"img",5),r(),a(7,"td"),l(8),r(),a(9,"td"),l(10),r(),a(11,"td"),l(12),F(13,"number"),r(),a(14,"td")(15,"a",6),l(16,"Info"),r()()()),n&2){let p=t.$implicit,i=t.index;s(2),y(" ",i+1,""),s(2),y(" ",p.flag," "),s(2),c("src",p.flags.svg,B)("alt",p.name.common),s(2),y(" ",p.name.common," "),s(2),y(" ",p.capital," "),s(2),y(" ",w(13,8,p.population)," "),s(3),c("routerLink",P(10,de,p.cca3))}}function fe(n,t){if(n&1&&(a(0,"table",3)(1,"thead")(2,"tr")(3,"th"),l(4,"#"),r(),a(5,"th"),l(6,"Abv"),r(),a(7,"th"),l(8,"Bandera"),r(),a(9,"th"),l(10,"Nombre"),r(),a(11,"th"),l(12,"Capital"),r(),a(13,"th"),l(14,"Poblaci\xF3n"),r(),a(15,"th"),l(16,"Ver m\xE1s"),r()()(),a(17,"tbody"),u(18,he,17,12,"tr",4),r()()),n&2){let p=b();s(18),c("ngForOf",p.countriesLand)}}var x=(()=>{let t=class t{constructor(){this.countriesLand=[]}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=h({type:t,selectors:[["countries-country-table"]],inputs:{countriesLand:"countriesLand"},decls:3,vars:2,consts:[["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],["table",""],[1,"alert","alert-warning","text-center"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"src","alt"],[3,"routerLink"]],template:function(o,e){if(o&1&&u(0,ue,2,0,"div",0)(1,fe,19,1,"ng-template",null,1,N),o&2){let C=R(2);c("ngIf",e.countriesLand.length===0)("ngIfElse",C)}},dependencies:[D,g,ie,M],styles:["img[_ngcontent-%COMP%]{width:35px}"]});let n=t;return n})();function ye(n,t){n&1&&m(0,"shared-loader-spinner")}var ae=(()=>{let t=class t{constructor(i){this.countriesService=i,this.countries=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countries=this.countriesService.cacheStore.byCapital.countries,this.initialValue=this.countriesService.cacheStore.byCapital.term}searchByCapital(i){this.isLoading=!0,console.log({event:i}),this.countriesService.searchCapital(i).subscribe(o=>{this.countries=o,this.isLoading=!1},o=>{console.log(o)})}};t.\u0275fac=function(o){return new(o||t)(f(v))},t.\u0275cmp=h({type:t,selectors:[["app-by-capital-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por capital",3,"initialValue","onDebounce"],[4,"ngIf"],[3,"countriesLand"]],template:function(o,e){o&1&&(a(0,"h2"),l(1,"Por Capital"),r(),m(2,"hr"),a(3,"div",0)(4,"div",1)(5,"shared-search-box",2),E("onDebounce",function($){return e.searchByCapital($)}),r()()(),a(6,"div",0)(7,"div",1),m(8,"hr"),u(9,ye,1,0,"shared-loader-spinner",3),m(10,"countries-country-table",4),r()()),o&2&&(s(5),c("initialValue",e.initialValue),s(4),c("ngIf",e.isLoading),s(),c("countriesLand",e.countries))},dependencies:[g,O,_,x]});let n=t;return n})();function ve(n,t){n&1&&m(0,"shared-loader-spinner")}var le=(()=>{let t=class t{constructor(i){this.countriesService=i,this.countries=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countries=this.countriesService.cacheStore.byCountries.countries,this.initialValue=this.countriesService.cacheStore.byCountries.term}searchByName(i){this.isLoading=!0,console.log({event:i}),this.countriesService.searchName(i).subscribe(o=>{this.countries=o,this.isLoading=!1},o=>{console.log(o)})}};t.\u0275fac=function(o){return new(o||t)(f(v))},t.\u0275cmp=h({type:t,selectors:[["app-by-country-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por pa\xEDs",3,"initialValue","onDebounce"],[4,"ngIf"],[3,"countriesLand"]],template:function(o,e){o&1&&(a(0,"h2"),l(1,"Por Nombre"),r(),m(2,"hr"),a(3,"div",0)(4,"div",1)(5,"shared-search-box",2),E("onDebounce",function($){return e.searchByName($)}),r()()(),a(6,"div",0)(7,"div",1),m(8,"hr"),u(9,ve,1,0,"shared-loader-spinner",3),m(10,"countries-country-table",4),r()()),o&2&&(s(5),c("initialValue",e.initialValue),s(4),c("ngIf",e.isLoading),s(),c("countriesLand",e.countries))},dependencies:[g,O,_,x]});let n=t;return n})();var Ce=n=>({"btn-outline-primary":n});function Se(n,t){if(n&1){let p=X();a(0,"button",6),E("click",function(){let e=G(p).$implicit,C=b();return K(C.searchByRegion(e))}),l(1),r()}if(n&2){let p=t.$implicit,i=b();c("ngClass",P(2,Ce,p===i.selectedRegion)),s(),d(p)}}function be(n,t){n&1&&m(0,"shared-loader-spinner")}var se=(()=>{let t=class t{constructor(i){this.countriesService=i,this.countries=[],this.regions=["Africa","Americas","Asia","Europe","Oceania"],this.isLoading=!1}ngOnInit(){this.countries=this.countriesService.cacheStore.byRegion.countries,this.selectedRegion=this.countriesService.cacheStore.byRegion.region}searchByRegion(i){this.isLoading=!0,this.selectedRegion=i,console.log({event}),this.countriesService.searchRegion(i).subscribe(o=>{this.countries=o,this.isLoading=!1},o=>{console.log(o)})}};t.\u0275fac=function(o){return new(o||t)(f(v))},t.\u0275cmp=h({type:t,selectors:[["app-by-region-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col","text-center"],["class","btn mx-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col"],[4,"ngIf"],[3,"countriesLand"],[1,"btn","mx-2",3,"ngClass","click"]],template:function(o,e){o&1&&(a(0,"h2"),l(1,"Por Region"),r(),m(2,"hr"),a(3,"div",0)(4,"div",1),u(5,Se,2,4,"button",2),r()(),a(6,"div",0)(7,"div",3),m(8,"hr"),u(9,be,1,0,"shared-loader-spinner",4),m(10,"countries-country-table",5),r()()),o&2&&(s(5),c("ngForOf",e.regions),s(4),c("ngIf",e.isLoading),s(),c("countriesLand",e.countries))},dependencies:[Y,D,g,_,x]});let n=t;return n})();function Ie(n,t){n&1&&(a(0,"div",11),l(1," Espere por favor "),r())}function Ee(n,t){if(n&1&&(a(0,"div")(1,"div",2)(2,"div",12)(3,"h2"),l(4,"Pa\xEDs: "),a(5,"strong"),l(6),r()(),m(7,"hr"),r()()()),n&2){let p=b();s(6),d(p.country.name.common)}}var ce=(()=>{let t=class t{constructor(i,o,e){this.activatedRouted=i,this.countriesService=o,this.router=e,this.id=""}ngOnInit(){this.activatedRouted.params.pipe(H(({myId:i})=>this.countriesService.searchCountryByAlphaCode(i))).subscribe(i=>{if(console.log(i),!i)return this.router.navigateByUrl("");console.log("Tenemos un pais!"),this.country=i},i=>{console.log(i)})}};t.\u0275fac=function(o){return new(o||t)(f(te),f(v),f(ne))},t.\u0275cmp=h({type:t,selectors:[["app-country-page"]],decls:42,vars:16,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"row"],[1,"col-4"],[1,"img-thumbnail",3,"src","alt"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap"],[1,"badge","bg-primary","m-1"],[1,"alert","alert-info"],[1,"col-12"]],template:function(o,e){if(o&1&&(u(0,Ie,2,0,"ng-template",null,0,N)(2,Ee,8,1,"div",1),a(3,"div",2)(4,"div",3)(5,"h3"),l(6,"Bandera"),r(),m(7,"img",4),r(),a(8,"div",5)(9,"h3"),l(10,"Informaci\xF3n"),r(),a(11,"ul",6)(12,"li",7)(13,"strong"),l(14,"Poblaci\xF3n:"),r(),l(15),F(16,"number"),r(),a(17,"li",7)(18,"strong"),l(19,"C\xF3digo:"),r(),l(20),r()()(),a(21,"div",8)(22,"div",5)(23,"h3"),l(24,"Traducciones"),r(),a(25,"div",9)(26,"span",10),l(27),r(),a(28,"span",10),l(29),r(),a(30,"span",10),l(31),r(),a(32,"span",10),l(33),r(),a(34,"span",10),l(35),r(),a(36,"span",10),l(37),r(),a(38,"span",10),l(39),r(),a(40,"span",10),l(41),r()()()()()),o&2){let C=R(1);s(2),c("ngIf",e.country)("ngIfElse",C),s(5),c("src",e.country==null||e.country.flags==null?null:e.country.flags.svg,B)("alt",e.country==null||e.country.name==null?null:e.country.name.common),s(8),y(" ",w(16,14,e.country==null?null:e.country.population)," "),s(5),y(" ",e.country==null?null:e.country.cca3," "),s(7),d(e.country==null||e.country.translations==null||e.country.translations.ara==null?null:e.country.translations.ara.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.bre==null?null:e.country.translations.bre.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.ces==null?null:e.country.translations.ces.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.cym==null?null:e.country.translations.cym.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.deu==null?null:e.country.translations.deu.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.est==null?null:e.country.translations.est.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.fin==null?null:e.country.translations.fin.common),s(2),d(e.country==null||e.country.translations==null||e.country.translations.fra==null?null:e.country.translations.fra.common)}},dependencies:[g,M]});let n=t;return n})();var _e=[{path:"by-capital",component:ae},{path:"by-country",component:le},{path:"by-region",component:se},{path:"by/:myId",component:ce},{path:"**",redirectTo:"by-capital"}],me=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=L({type:t}),t.\u0275inj=T({imports:[A.forChild(_e),A]});let n=t;return n})();var Xe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=L({type:t}),t.\u0275inj=T({imports:[Z,me,oe]});let n=t;return n})();export{Xe as CountriesModule};
